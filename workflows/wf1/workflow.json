{
    "workflow": {
        "steps": [
            {
                "id": "fetch-metadata",
                "adaptors": [
                    "collections",
                    "common@2.1.1"
                ],
                "configuration": "../tmp/collections-creds.json",
                "expression": "fetch-metadata.js",
                "state": {
                    "manualCursor": "2024-06-04"
                },
                "next": {
                    "get-teis": "!state.errors"
                }
            },
            {
                "id": "get-teis",
                "adaptor": "dhis2@5.0.1",
                "configuration": "../tmp/dhis2-creds.json",
                "expression": "get-teis-and-locations.js",
                "next": {
                    "create-patients": "!state.errors",
                    "alert-admin": "state.duplicatePatients.length > 0 && !state.errors"
                }
            },
            {
                "id": "create-patients",
                "adaptor": "openmrs@4.2.0",
                "configuration": "../tmp/openmrs-creds.json",
                "expression": "create-patients.js",
                "next": {
                    "update-teis": true
                }
            },
            {
                "id": "update-teis",
                "adaptor": "dhis2@5.0.1",
                "configuration": "../tmp/dhis2-creds.json",
                "expression": "update-teis.js"
            },
            {
                "id": "alert-admin",
                "adaptor": "common@2.1.1",
                "configuration": null,
                "expression": "alert-admin.js"
            }
        ]
    }
}